
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://github.com/cjoakim/actions-101/tutorial_graph/">
      
      
        <link rel="prev" href="../tutorial_architecture/">
      
      
        <link rel="next" href="../tutorial_home/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>Tutorial graph - Actions 101</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#aigraph4pg-tutorial-graphs-apache-age-and-opencypher" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Actions 101" class="md-header__button md-logo" aria-label="Actions 101" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Actions 101
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Tutorial graph
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Actions 101" class="md-nav__button md-logo" aria-label="Actions 101" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Actions 101
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Apache AGE Graph reference and tutorial
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial architecture
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Tutorial graph
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Tutorial graph
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#aigraph4pg-tutorial-graphs-apache-age-and-opencypher" class="md-nav__link">
    <span class="md-ellipsis">
      AIGraph4pg Tutorial : Graphs, Apache AGE, and openCypher
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AIGraph4pg Tutorial : Graphs, Apache AGE, and openCypher">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#graph-terminology" class="md-nav__link">
    <span class="md-ellipsis">
      Graph Terminology
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opencypher" class="md-nav__link">
    <span class="md-ellipsis">
      openCypher
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-and-loading-an-age-graph" class="md-nav__link">
    <span class="md-ellipsis">
      Creating and Loading an AGE Graph
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-underlying-apache-age-data-structures" class="md-nav__link">
    <span class="md-ellipsis">
      The Underlying Apache AGE Data Structures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interacting-with-your-age-graph-in-azure-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Interacting with your AGE graph in Azure PostgreSQL
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_home/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_opencypher_gen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial opencypher gen
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_pg_admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial pg admin
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_relational/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial relational
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_vector_search/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial vector search
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Tutorial graph</h1>

<h2 id="aigraph4pg-tutorial-graphs-apache-age-and-opencypher">AIGraph4pg Tutorial : Graphs, Apache AGE, and openCypher</h2>
<hr />
<h5 id="graph-terminology">Graph Terminology</h5>
<p>There are several types of <strong>graph databases</strong>.
One of the most common is called <strong>Labeled Property Graph</strong> or
<strong>LPG</strong>.With LPG graphs, you compose the graph of <strong>nodes</strong> and <strong>edges</strong>.<strong>Nodes represent the entities</strong> in the graph, and the
<strong>Edges represent the relationships</strong> between the nodes or entities.
Nodes are alternatively called <strong>Vertices</strong>.
Nodes and Edges can have an arbitrary set of <strong>properties</strong> which are key-value data pairs.These relationships or edges are "first class citizens" within graph databases,
and the relationships are often more important than the nodes themselves.
While relational databases offer foreign key constraints, the edges
in a graph database are more nuanced and expressive.</p>
<p>Definitions:</p>
<ul>
<li><strong>Graph</strong> : A collection of nodes and edges</li>
<li><strong>Node</strong> : An entity or vertex in a graph</li>
<li><strong>Edge</strong> : A named connection between two nodes</li>
<li><strong>Property</strong> : Key-value pair associated with a node or edge</li>
<li><strong>Label</strong> : A tag attached to a node or edge, such as "Case" in the following diagram</li>
</ul>
<p><img alt="" src="../img/sample-graph.png" /></p>
<p>In the above visualization, the Nodes are represented as named <strong>circles</strong>
while the Edges are represented as named <strong>lines</strong>.The edges are <strong>directed</strong> and don't imply or require a
reverse relationship. For example, in this model, there is a
<strong>Case -&gt; tried_in -&gt; Jurisdiction</strong> relationship
but no corresponding relationship from Jurisdiction to Case.With LGP graphs there is no explicit <strong>schema</strong> that you have to define.
The schema is implicitly created as you add your Nodes and Edges.Note that the graph implemented in this reference application only
contains <strong>Case Nodes and cites and cited_by Edges</strong>.
Note Judges, Jurisdictions, and other edge types.</p>
<hr />
<h5 id="opencypher">openCypher</h5>
<p><a href="https://opencypher.org">openCypher</a> is the query language
used by Apache AGE.
Per the opencypher.org website:  </p>
<p>openCypher is an open source specification of Cypher® - the most widely adopted
query language for property graph databases. Cypher was developed by Neo4j®.
The openCypher syntax is well documented
<a href="https://s3.amazonaws.com/artifacts.opencypher.org/openCypher9.pdf">here</a>
in a 200+ page PDF document. It is recommended that you download this PDF and keep it
as a handy reference.The following is an example openCypher to find a specific Case node:
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>  MATCH (c:Case {id:594079}) RETURN c
</code></pre></div>
In this example, "Case" is the type of Node, and we're searching for the Case
with the "id" property equal to 594079. The "c:" part indicates that we're
assigning the Case node to the variable "c", then the query RETURNs the "c" variable.Now, when we execute this same query in Apache AGE, we wrapper the openCypher query
with a SQL query that looks like the following:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>    select * from ag_catalog.cypher(&#39;legal_cases&#39;,
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>      $$ MATCH (c:Case {id:594079}) RETURN c $$)
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    as (c agtype);
</code></pre></div>
This SQL invokes the "cypher" function in the Apache AGE "ag_catalog" schema,
and provides the name of the graph to be queried (i.e. - "legal_cases").
The return variable c is cast to the "agtype" data type of Apache AGE,
which is its' standard return type.
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>    select * from ag_catalog.cypher(&#39;legal_cases&#39;,
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>      $$ MATCH (c:Case {id:594079}) RETURN c $$)
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    as (c agtype);
</code></pre></div>
Before that query is executed, you'll need to add the Apache AGE schema
(i.e. - ag_catalog) to your schema search path, as shown below in a psql session.
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>    dev=&gt; SET search_path TO public, ag_catalog, legal_cases;
</code></pre></div>
In this example, the search path is set to the public schema first,
followed by age, followed by your specific graph schema (i.e. - legal_cases).
See the official PostgreSQL documentation on
<a href="https://www.postgresql.org/docs/current/ddl-schemas.html">Schemas and the search_path</a>.Alternatively, the <strong>alter user</strong> command can be used to
set the search path for a specific user, as shown below:
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>    dev=&gt; alter user  set search_path=&#39;public&#39;,&#39;ag_catalog&#39;;
</code></pre></div></p>
<hr />
<h5 id="creating-and-loading-an-age-graph">Creating and Loading an AGE Graph</h5>
<p>Please revisit the <strong>docs\readme.md page of the GitHub repository</strong>
where this process is documented.This section further explains the process.There are multiple ways to load an Apache AGE graph in Azure PostgreSQL.
One way by using the <strong>psql</strong> command line utility to redirect
in a set of SQL statements that load the Nodes and Edges; this is the approach
used in the docs\readme.md page.The Microsoft Azure PostgreSQL team is currently working on a high-speed data loader utility
for Apache AGE graphs. This will be used and documented in this reference application
once it becomes available.Currently, this reference application loads the graph with this command that invokes psql:
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>    .\pg.ps1 flex dev ..\data\legal_cases\age_load_statments.sql
</code></pre></div>
The data in file <strong>age_load_statments.sql</strong> contains three lines that
look like the following. The first line creates a Case Node, the next line creates
a "cites" edge, and the third libe creates an "cited_by" edge. These three lines have
been reformatted for readability here.
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>    SELECT * FROM cypher(&#39;legal_cases&#39;,
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>      $$ CREATE (:Case { id: 594079, url: &#39;https://static.case.law/wash/79/cases/0643-01.json&#39;, name: &#39;Martindale Clothing Co. v. Spokane &amp; Eastern Trust Co.&#39;, court_id: 9029, court: &#39;Washington Supreme Court&#39;, decision_year: 1914, citation_count: 5 }) $$)
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>    as (v agtype);
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>    SELECT * FROM cypher(&#39;legal_cases&#39;,
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>      $$ MATCH (a:Case), (b:Case) WHERE a.id = 1017660 AND b.id = 594079
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>         CREATE (a)-[e:cites  {case_id: &#39;1017660&#39;,  cited_case_id: &#39;594079&#39;,  case_name: &#39;United Mutual Savings Bank v. Riebli&#39;,  cited_case_name: &#39;Martindale Clothing Co. v. Spokane &amp; Eastern Trust Co.&#39;,  cited_case_year: 1914 }]-&gt;(b) RETURN e $$)
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    as (e agtype);
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>    SELECT * FROM cypher(&#39;legal_cases&#39;,
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>      $$ MATCH (a:Case), (b:Case) WHERE a.id = 594079 AND b.id = 1017660
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>         CREATE (a)-[e:cited_by  {case_id: &#39;594079&#39;,  cited_case_id: &#39;1017660&#39;,  case_name: &#39;Martindale Clothing Co. v. Spokane &amp; Eastern Trust Co.&#39;,  cited_case_name: &#39;United Mutual Savings Bank v. Riebli&#39;,  cited_case_year: 1960 }]-&gt;(b) RETURN e $$)
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>      as (e agtype);
</code></pre></div>
In the first line, notice how the new Case Node contains an arbitrary set of properties
in JSON format. This is schemaless in nature.The next two lines create Edges that are associated with this Case 594079.
Notice how the two Nodes are first located with the <strong>MATCH</strong> clause, and the Edge
is then <strong>CREATEd</strong> between the MATCHed Nodes. Notice that Edges also may be created
with an arbitrary set of properties in JSON format.</p>
<hr />
<h5 id="the-underlying-apache-age-data-structures">The Underlying Apache AGE Data Structures</h5>
<p>You can use the PostgreSQL <strong>pg_dump</strong> utility, with the <strong>--schema-only</strong>
option to dump the schema of your database to gain insight into how the AGE graph
is stored in the database. The output will be similar to the following:
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>    CREATE TABLE legal_cases._ag_label_vertex (
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>      id ag_catalog.graphid NOT NULL,
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>      properties ag_catalog.agtype DEFAULT ag_catalog.agtype_build_map() NOT NULL
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    );
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>    CREATE TABLE legal_cases._ag_label_edge (
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>      id ag_catalog.graphid NOT NULL,
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>      start_id ag_catalog.graphid NOT NULL,
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>      end_id ag_catalog.graphid NOT NULL,
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>      properties ag_catalog.agtype DEFAULT ag_catalog.agtype_build_map() NOT NULL
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>    );
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>    CREATE TABLE legal_cases.&quot;Case&quot; ()
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>    INHERITS (legal_cases._ag_label_vertex);
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>    CREATE TABLE legal_cases.cited_by ()
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>    INHERITS (legal_cases._ag_label_edge);
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>    CREATE TABLE legal_cases.cites ()
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>    INHERITS (legal_cases._ag_label_edge);
</code></pre></div>
In this case the name of the graph is "legal_cases", and it is in its own schema.Apache AGE creates two <strong>superclass tables</strong> for each graph,
one for all Nodes and one for all Edges (i.e. - _ag_label_vertex and _ag_label_edge).Then, AGE uses the <strong>INHERITS</strong> clause to create one table for each Node type
and one table for each and Edge type in your graph.</p>
<hr />
<h5 id="interacting-with-your-age-graph-in-azure-postgresql">Interacting with your AGE graph in Azure PostgreSQL</h5>
<p>To execute <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a>
operations vs AGE you simply use the tools and software libraries that you already use with PostgreSQL.For example, the <strong>psql</strong> command line utility, the <strong>pgAdmin</strong> GUI,
or a software library like <strong>psycopg2</strong> for Python.See <strong>the post_query method in webapp.py</strong> in the repo for an example of how
to use psycopg_pool to interact with AGE in an asynchronous manner.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2025 <a href="https://github.com/cjoakim/actions-101"  target="_blank" rel="noopener">Microsoft</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>